{% extends 'base.html.twig' %}

{% block title %}FACE OFF - COMBAT{% endblock %}

{% block stylesheets %}
{{ parent() }}
<style>
    .arena-container {
        background: url('/images/pixel-battle-bg.png') no-repeat center center;
        background-size: cover;
        min-height: 500px;
        position: relative;
        overflow: hidden;
        border: 4px solid #000;
        box-shadow: 0 0 15px rgba(255, 0, 0, 0.7);
    }
    
    .title-banner {
        background-color: rgba(0, 0, 0, 0.8);
        color: #ff0;
        text-align: center;
        font-family: 'Press Start 2P', cursive;
        padding: 10px 0;
        text-shadow: 3px 3px 0 #f00;
        font-size: 28px;
        letter-spacing: 2px;
    }
    
    .versus-screen {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
    }
    
    .player-card {
        width: 40%;
        background-color: rgba(0, 0, 0, 0.7);
        border: 3px solid #ff0;
        padding: 15px;
        text-align: center;
        color: #fff;
        position: relative;
        box-shadow: 0 0 10px rgba(255, 255, 0, 0.6);
    }
    
    .player-left {
        transform: perspective(500px) rotateY(10deg);
    }
    
    .player-right {
        transform: perspective(500px) rotateY(-10deg);
    }
    
    .player-avatar {
        width: 150px;
        height: 150px;
        margin: 0 auto;
        border: 2px solid #f00;
        overflow: hidden;
        image-rendering: pixelated;
    }
    
    .player-info {
        margin-top: 10px;
        font-family: 'Press Start 2P', cursive;
        font-size: 14px;
    }
    
    .player-name {
        color: #ff0;
        font-size: 18px;
        text-shadow: 2px 2px 0 #f00;
    }
    
    .player-class {
        color: #0ff;
        font-size: 12px;
    }
    
    .player-owner {
        color: #aaa;
        font-size: 10px;
    }
    
    .vs-symbol {
        width: 20%;
        text-align: center;
        margin-left:100px;
        font-family: 'Press Start 2P', cursive;
        font-size: 64px;
        color: #f00;
        text-shadow: 
            0 0 10px #ff0,
            0 0 20px #ff0,
            0 0 30px #ff0;
        animation: pulse 1.5s infinite alternate;
    }
    
    .fight-button {
        display: block;
        width: 200px;
        margin: 15px auto;
        padding: 10px;
        background-color: #f00;
        color: #fff;
        border: 3px solid #ff0;
        font-family: 'Press Start 2P', cursive;
        font-size: 18px;
        text-transform: uppercase;
        cursor: pointer;
        text-align: center;
        text-decoration: none;
        box-shadow: 0 5px 0 #900;
        transition: all 0.1s;
    }
    
    .fight-button:hover {
        background-color: #ff0;
        color: #f00;
        border-color: #f00;
        transform: translateY(2px);
        box-shadow: 0 3px 0 #900;
    }
    
    .no-opponents {
        text-align: center;
        padding: 40px;
        color: #fff;
        font-family: 'Press Start 2P', cursive;
        background-color: rgba(0, 0, 0, 0.7);
        border: 3px solid #f00;
        margin: 20px;
    }
    
    @keyframes pulse {
        from { transform: scale(1); }
        to { transform: scale(1.1); }
    }
</style>
{% endblock %}

{% block body %}
<div class="title-banner">
    SÉLECTION DE L'ADVERSAIRE
</div>
<div class="arena-container">
    {% if opponents is empty %}
        <div class="no-opponents">
            Aucun personnage d'ami disponible pour un duel.
        </div>
    {% else %}
        {% for opp in opponents %}
            <div class="versus-screen">
                <!-- Player Character -->
                <div class="player-card player-left">
                    <div class="player-avatar">

                         <img src="{{ asset(myChar.hero.image) }}" style="width:100%;"> 
                        
                    </div>
                    <div class="player-info">
                        <div class="player-name">{{ myChar.name }}</div>
                        <div class="player-class">{{ myChar.hero.className }}</div>
                        <div class="player-owner">VOUS</div>
                    </div>
                </div>
                
                <!-- VS Symbol -->
                <div class="vs-symbol">VS</div>
                <!-- Opponent Character -->
                <div class="player-card player-right">
                    <div class="player-avatar">
                      <img src="{{ asset(opp.image) }}" style="width:100%;">  
                 
                   
                    </div>
                    <div class="player-info">
                        <div class="player-name">{{ opp.name }}</div>
                        <div class="player-class">{{ opp.heroClass }}</div>
                        <div class="player-owner">{{ opp.owner }}</div>
                    </div>
                </div>
            </div>
            
            <a href="{{ path('battle_faceoff_start', { id1: myChar.id, id2: opp.id }) }}" class="fight-button">
                LANCER LE COMBAT ⚔️
            </a>
                    {% include 'components/_menu_button.html.twig' with {
            'route_name': 'app_menu',
            'button_text': 'Back to Menu'
        } %}
            {% if not loop.last %}<hr style="border-color: #f00; margin: 30px 0;">{% endif %}
        {% endfor %}
    {% endif %}
</div>
{% endblock %}