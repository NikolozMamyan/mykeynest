{# templates/settings/profile.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}{{ 'settings.profile.title'|trans }}{% endblock %}

{% block body %}
<style>
/* =========================
   PROFILE EDIT – UI/UX STYLÉ
   Reprend la palette de settings/index
   ========================= */

/* Background avec gradients légers */
.profile-page::before{
  content:"";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image:
    radial-gradient(circle at 20% 10%, rgba(5,150,105,.12), transparent 35%),
    radial-gradient(circle at 80% 0%, rgba(16,185,129,.10), transparent 40%),
    radial-gradient(circle at 10% 80%, rgba(245,158,11,.10), transparent 40%),
    linear-gradient(135deg, rgba(240,253,244,.9), rgba(236,253,245,.9));
  filter: saturate(1.05);
  z-index: -2;
}

/* Noise texture */
.profile-page::after{
  content:"";
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: .05;
  background:
    repeating-linear-gradient(0deg, rgba(0,0,0,.35) 0 1px, transparent 1px 3px),
    repeating-linear-gradient(90deg, rgba(0,0,0,.25) 0 1px, transparent 1px 4px);
  mix-blend-mode: overlay;
  z-index: -1;
}

.profile-page{
  min-height: 100vh;
  padding: 26px 16px 40px;
  color: var(--color-text-dark);
  background: transparent;
}

/* Header avec retour */
.profile-header{
  max-width: 760px;
  margin: 0 auto 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}

.profile-back{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  border-radius: 12px;
  text-decoration: none;
  color: var(--color-text-dark);
  font-weight: 700;
  font-size: 14px;
  background: rgba(255,255,255,.72);
  backdrop-filter: var(--blur-background);
  border: 1px solid rgba(226,232,240,.85);
  box-shadow: var(--shadow-sm);
  transition: all .18s ease;
}

.profile-back:hover{
  background: rgba(241,245,249,.9);
  transform: translateX(-2px);
  box-shadow: var(--shadow-md);
}

.profile-back:active{
  transform: translateX(-1px) scale(.98);
}

[data-theme="dark"] .profile-back{
  background: rgba(15,23,42,.55);
  border-color: rgba(51,65,85,.75);
  color: var(--color-text-light);
}

[data-theme="dark"] .profile-back:hover{
  background: rgba(30,41,59,.75);
}

.profile-title{
  font-size: clamp(24px, 2.4vw, 34px);
  font-weight: 900;
  letter-spacing: -0.03em;
  margin: 0;
  line-height: 1.05;
  background: linear-gradient(90deg, var(--color-text-dark), var(--color-primary));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

/* Container */
.profile-container{
  max-width: 760px;
  margin: 0 auto;
}

/* Card principale */
.profile-card{
  border-radius: 18px;
  overflow: hidden;
  background: rgba(255,255,255,.72);
  backdrop-filter: var(--blur-background);
  -webkit-backdrop-filter: var(--blur-background);
  border: 1px solid rgba(226,232,240,.85);
  box-shadow: var(--shadow-md);
  margin-bottom: 20px;
}

[data-theme="dark"] .profile-card{
  background: rgba(15,23,42,.55);
  border: 1px solid rgba(51,65,85,.75);
  box-shadow: 0 10px 25px rgba(0,0,0,.35);
}

/* Section interne */
.profile-section{
  padding: 24px 20px;
}

.profile-section + .profile-section{
  border-top: 1px solid rgba(226,232,240,.75);
}

[data-theme="dark"] .profile-section + .profile-section{
  border-top: 1px solid rgba(51,65,85,.75);
}

/* Section header */
.section-header{
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 18px;
}

.section-icon{
  width: 36px;
  height: 36px;
  border-radius: 10px;
  display: grid;
  place-items: center;
  background: rgba(5,150,105,.12);
  color: var(--color-primary);
  border: 1px solid rgba(5,150,105,.18);
  box-shadow: 0 6px 18px rgba(5,150,105,.12);
}

.section-title{
  font-size: 18px;
  font-weight: 900;
  letter-spacing: -0.02em;
  margin: 0;
  color: var(--color-text-dark);
}

/* Form styles */
.form-grid{
  display: grid;
  gap: 18px;
}

.form-grid-2{
  grid-template-columns: 1fr;
}

@media (min-width: 640px){
  .form-grid-2{
    grid-template-columns: 1fr 1fr;
  }
}

.form-group{
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form-label{
  font-size: 14px;
  font-weight: 750;
  color: var(--color-text-dark);
  display: flex;
  align-items: center;
  gap: 6px;
}

.form-label i{
  color: var(--color-text-muted);
  font-size: 13px;
}

.form-required{
  color: var(--color-danger-end);
  font-weight: 900;
}

.form-input,
.form-textarea{
  width: 100%;
  padding: 12px 14px;
  border-radius: 12px;
  border: 1.5px solid rgba(226,232,240,.9);
  background: rgba(255,255,255,.85);
  color: var(--color-text-dark);
  font-size: 15px;
  font-weight: 600;
  transition: all .2s ease;
  font-family: inherit;
}

.form-input:focus,
.form-textarea:focus{
  outline: none;
  border-color: var(--color-primary);
  background: rgba(255,255,255,.95);
  box-shadow: 0 0 0 3px rgba(5,150,105,.15);
}

.form-textarea{
  min-height: 100px;
  resize: vertical;
}

[data-theme="dark"] .form-input,
[data-theme="dark"] .form-textarea{
  background: rgba(30,41,59,.55);
  border-color: rgba(51,65,85,.9);
  color: var(--color-text-light);
}

[data-theme="dark"] .form-input:focus,
[data-theme="dark"] .form-textarea:focus{
  background: rgba(30,41,59,.75);
  border-color: var(--color-primary);
}

/* Actions footer */
.profile-actions{
  padding: 20px;
  background: rgba(241,245,249,.5);
  border-top: 1px solid rgba(226,232,240,.75);
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  flex-wrap: wrap;
}

[data-theme="dark"] .profile-actions{
  background: rgba(15,23,42,.35);
  border-top-color: rgba(51,65,85,.75);
}

.btn{
  padding: 12px 24px;
  border-radius: 12px;
  font-size: 15px;
  font-weight: 800;
  text-decoration: none;
  border: none;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  transition: all .18s ease;
  font-family: inherit;
}

.btn-primary{
  background: linear-gradient(135deg, var(--color-primary), #10b981);
  color: #fff;
  box-shadow: var(--shadow-green);
}

.btn-primary:hover{
  transform: translateY(-1px);
  box-shadow: 0 12px 28px rgba(5,150,105,.35);
  filter: brightness(1.05);
}

.btn-primary:active{
  transform: translateY(0);
}

.btn-secondary{
  background: rgba(100,116,139,.12);
  color: var(--color-text-dark);
  border: 1px solid rgba(100,116,139,.25);
}

.btn-secondary:hover{
  background: rgba(100,116,139,.20);
}

[data-theme="dark"] .btn-secondary{
  background: rgba(51,65,85,.45);
  color: var(--color-text-light);
  border-color: rgba(71,85,105,.65);
}

[data-theme="dark"] .btn-secondary:hover{
  background: rgba(51,65,85,.65);
}

/* Focus styles */
.btn:focus-visible,
.form-input:focus-visible,
.form-textarea:focus-visible{
  outline: 3px solid var(--color-primary-hover);
  outline-offset: 2px;
}

/* Helper text */
.form-help{
  font-size: 12px;
  color: var(--color-text-muted);
  font-weight: 600;
  margin-top: -4px;
}

/* Responsive */
@media (max-width: 520px){
  .profile-page{ padding: 20px 12px 32px; }
  .profile-card{ border-radius: 16px; }
  .profile-section{ padding: 20px 16px; }
  .profile-actions{ 
    padding: 16px; 
    flex-direction: column;
  }
  .btn{ 
    width: 100%; 
    justify-content: center;
  }
  .profile-header{
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }
}

/* Variations d'icônes */
.section-icon.icon-identity{ background: rgba(5,150,105,.12); border-color: rgba(5,150,105,.18); color: var(--color-primary); }
.section-icon.icon-business{ background: rgba(245,158,11,.14); border-color: rgba(245,158,11,.20); color: var(--color-warning); }
.section-icon.icon-contact{ background: rgba(16,185,129,.12); border-color: rgba(16,185,129,.18); color: var(--color-success); }
</style>

  {# Header #}
  <div class="profile-header">
    <a href="{{ path('app_settings') }}" class="profile-back">
      <i class="fa-solid fa-arrow-left"></i>
      <span>{{ 'common.back'|trans }}</span>
    </a>
    <h1 class="profile-title">{{ 'settings.profile.edit_title'|trans }}</h1>
  </div>

  {# Form #}
  <div class="profile-container">
    {{ form_start(form, { attr: { class: 'profile-form' } }) }}

    <div class="profile-card">
      
      {# Identité #}
      <section class="profile-section">
        <div class="section-header">
          <span class="section-icon icon-identity">
            <i class="fa-solid fa-user"></i>
          </span>
          <h2 class="section-title">{{ 'settings.profile.section_identity'|trans }}</h2>
        </div>

        <div class="form-grid form-grid-2">
          <div class="form-group">
            {{ form_label(form.prenom, null, { 
              label_attr: { class: 'form-label' },
              label_html: true,
              label: '<i class="fa-regular fa-user"></i> ' ~ 'user.field.firstname'|trans ~ ' <span class="form-required">*</span>'
            }) }}
            {{ form_widget(form.prenom, { attr: { class: 'form-input', placeholder: 'John' } }) }}
            {{ form_errors(form.prenom) }}
          </div>

          <div class="form-group">
            {{ form_label(form.nom, null, { 
              label_attr: { class: 'form-label' },
              label_html: true,
              label: '<i class="fa-regular fa-user"></i> ' ~ 'user.field.lastname'|trans ~ ' <span class="form-required">*</span>'
            }) }}
            {{ form_widget(form.nom, { attr: { class: 'form-input', placeholder: 'Doe' } }) }}
            {{ form_errors(form.nom) }}
          </div>
        </div>
      </section>

      {# Entreprise #}
      <section class="profile-section">
        <div class="section-header">
          <span class="section-icon icon-business">
            <i class="fa-solid fa-building"></i>
          </span>
          <h2 class="section-title">{{ 'settings.profile.section_business'|trans }}</h2>
        </div>

        <div class="form-grid">
          <div class="form-group">
            {{ form_label(form.company, null, { 
              label_attr: { class: 'form-label' },
              label_html: true,
              label: '<i class="fa-solid fa-building"></i> ' ~ 'user.field.company'|trans
            }) }}
            {{ form_widget(form.company, { attr: { class: 'form-input', placeholder: 'Acme Inc.' } }) }}
            <small class="form-help">{{ 'settings.profile.company_help'|trans }}</small>
            {{ form_errors(form.company) }}
          </div>

          {# <div class="form-group">
            {{ form_label(form.fonction, null, { 
              label_attr: { class: 'form-label' },
              label_html: true,
              label: '<i class="fa-solid fa-briefcase"></i> ' ~ 'user.field.position'|trans
            }) }}
            {{ form_widget(form.fonction, { attr: { class: 'form-input', placeholder: 'Product Manager' } }) }}
            {{ form_errors(form.fonction) }}
          </div>
        </div> #}
      </section>

      {# Contact #}
      <section class="profile-section">
        <div class="section-header">
          <span class="section-icon icon-contact">
            <i class="fa-solid fa-at"></i>
          </span>
          <h2 class="section-title">{{ 'settings.profile.section_contact'|trans }}</h2>
        </div>

        <div class="form-grid">
          <div class="form-group">
            {{ form_label(form.email, null, { 
              label_attr: { class: 'form-label' },
              label_html: true,
              label: '<i class="fa-regular fa-envelope"></i> ' ~ 'user.field.email'|trans ~ ' <span class="form-required">*</span>'
            }) }}
            {{ form_widget(form.email, { attr: { class: 'form-input', placeholder: 'john.doe@example.com' } }) }}
            {{ form_errors(form.email) }}
          </div>

          <div class="form-group">
            {{ form_label(form.phone, null, { 
              label_attr: { class: 'form-label' },
              label_html: true,
              label: '<i class="fa-solid fa-phone"></i> ' ~ 'user.field.phone'|trans
            }) }}
            {{ form_widget(form.phone, { attr: { class: 'form-input', placeholder: '+33 6 12 34 56 78' } }) }}
            {{ form_errors(form.phone) }}
          </div>
        </div>
      </section>

      {# Actions #}
      <div class="profile-actions">
        <a href="{{ path('app_settings') }}" class="btn btn-secondary">
          <i class="fa-solid fa-xmark"></i>
          <span>{{ 'common.cancel'|trans }}</span>
        </a>
        <button type="submit" class="btn btn-primary">
          <i class="fa-solid fa-check"></i>
          <span>{{ 'common.save_changes'|trans }}</span>
        </button>
      </div>

    </div>

    {{ form_end(form) }}
  </div>



{% endblock %}